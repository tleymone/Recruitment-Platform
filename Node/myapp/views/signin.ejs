<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription</title>

    <!-- Liens vers les fichiers CSS de Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>

<body>
    <header class="border-bottom">
        <h1 class="text-center">SR10 - Site de recrutement</h1>
    </header>
    <main class="container mx-auto mt-3 text-center">
        <h2>Inscription</h2>
        <form action="/users/nvUser" method="post" onsubmit="return validerFormulaire()">
            <div class="col-md-6 mx-auto mb-3">
              <input type="text" class="form-control" id="nom" placeholder="Nom" name="fname">
            </div>
            <div class="col-md-6 mx-auto mb-3">
              <input type="text" class="form-control" id="prenom" placeholder="Prenom" name="lname">
            </div>
            <div class="col-md-6 mx-auto mb-3">
              <input type="tel" class="form-control" id="telephone" placeholder="Téléphone" name="tel">
            </div>
            <div class="col-md-6 mx-auto mb-3">
              <input type="email" class="form-control" id="email" placeholder="Email" name="email">
            </div>
            <div class="col-md-6 mx-auto mb-3">
              <input type="password" class="form-control" id="mdp" placeholder="Mot de passe" name="pwd">
            </div>
            <div class="col-md-6 mx-auto mb-3">
              <input type="password" class="form-control" id="confmdp" placeholder="Confirmer mot de passe" name="pwdbis">
            </div>
            <button type="submit" class="btn btn-primary mb-3">Inscription</button>
            <div class="d-flex flex-column align-items-center">
              <label class="mt-3">Vous avez déjà un compte ?</label>
              <a href="/login"><button type="button" class="btn btn-success">Connexion</button></a>
            </div>
          </form>
    </main>


</body>

</html>

<script>
  function validerFormulaire() {
    var telephone = document.getElementById("telephone").value;
    var email = document.getElementById("email").value;
    var motDePasse = document.getElementById("mdp").value;
    var confirmerMotDePasse = document.getElementById("confmdp").value;

    if (motDePasse !== confirmerMotDePasse) {
      alert("Les mots de passe ne correspondent pas");
      return false; // Empêche l'envoi du formulaire
    }

    if (!validerMotDePasse(motDePasse)) {
      alert("Le mot de passe ne satisfait pas les conditions requises");
      return false; // Empêche l'envoi du formulaire
    }

    if (!validerTelephone(telephone)) {
      alert("Le numéro de téléphone n'est pas valide");
      return false; // Empêche l'envoi du formulaire
    }

    if (!validerEmail(email)) {
      alert("L'adresse e-mail n'est pas valide");
      return false; // Empêche l'envoi du formulaire
    }

    return true; // Autorise l'envoi du formulaire
  }

  function validerMotDePasse(motDePasse) {
    // Vérifications du mot de passe
    if (motDePasse.length < 12) {
      return false;
    }

    var regexMajuscules = /[A-Z]/;
    var regexMinuscules = /[a-z]/;
    var regexChiffres = /[0-9]/;
    var regexCaracteresSpeciaux = /[!@#$%^&*()\-_=+{}[\]\\|:;"'<>,.?/~`]/;

    if (!regexMajuscules.test(motDePasse) ||
        !regexMinuscules.test(motDePasse) ||
        !regexChiffres.test(motDePasse) ||
        !regexCaracteresSpeciaux.test(motDePasse)) {
      return false;
    }

    return true;
  }

  function validerTelephone(telephone) {
    // Vérification du numéro de téléphone
    var regexTelephone = /^\d{10}$/; // Format attendu : 10 chiffres

    return regexTelephone.test(telephone);
  }

  function validerEmail(email) {
    // Vérification de l'adresse e-mail
    var regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    return regexEmail.test(email);
  }
</script>